!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";!function(){let e=["[data-click-to-add-class]","[data-click-to-remove-class]","[data-click-to-toggle-class]"],t=["[data-click-away-to-add-class]","[data-click-away-to-remove-class]","[data-click-away-to-toggle-class]"],a={"[data-click-to-add-class]":({selector:e,className:t})=>{c({selector:e,className:t,actionType:"add"})},"[data-click-away-to-add-class]":({selector:e,className:t})=>{c({selector:e,className:t,actionType:"add"})},"[data-click-to-remove-class]":({selector:e,className:t})=>{c({selector:e,className:t,actionType:"remove"})},"[data-click-away-to-remove-class]":({selector:e,className:t})=>{c({selector:e,className:t,actionType:"remove"})},"[data-click-to-toggle-class]":({selector:e,className:t})=>{c({selector:e,className:t,actionType:"toggle"})},"[data-click-away-to-toggle-class]":({selector:e,className:t})=>{c({selector:e,className:t,actionType:"toggle"})}};function c({selector:e,className:t,actionType:a}){Array.from(document.querySelectorAll(e)).forEach(e=>{"remove"===a||"toggle"===a&&e.classList.contains(t)?e.classList.remove(t):("add"===a||"toggle"===a&&!e.classList.contains(t))&&e.classList.add(t)})}function s(e,t){return function(e,t){return t.filter(t=>e.matches(t))}(e,t).reduce((t,c)=>{let s=c.replace(/^\[+|\]+$/g,""),l=e.getAttribute(s),o=function(e){let t=e.split(" ");1===t.length&&t.push("body");let[a,c]=t;if(a.startsWith("[")||c.startsWith("[")){let e=a.replace(/\s/,"").replace(/^\[+|\]+$/g,"").split(","),t=c.replace(/\s/,"").replace(/^\[+|\]+$/g,"").split(",");return e.map((e,a)=>({className:e,selector:t[a]||"body"}))}return{selector:c,className:a}}(l),r=a[c];return Array.isArray(o)?o.forEach(a=>{t.push({elem:e,selector:c,attrName:s,attrValue:l,actionArgs:a,actionFunc:r})}):t.push({elem:e,selector:c,attrName:s,attrValue:l,actionArgs:o,actionFunc:r}),t},[])}document.addEventListener("click",a=>{let c=function(t,a){let c=t.parentNode,l=[];if(!a||t.matches(a)){let a=s(t,e);l=l.concat(a)}for(;c!==document;){if(!a||c.matches(a)){let t=s(c,e);l=l.concat(t)}c=c.parentNode}return l}(a.target,e.join(","));c.forEach(e=>e.actionFunc(e.actionArgs)),function(e,a){let c=function(e){let t=[e],a=e.parentNode;for(;a!==document;)t.push(a),a=a.parentNode;return t}(e);return Array.from(document.querySelectorAll(t.join(","))).filter(e=>!c.includes(e)).reduce((e,c)=>{let l=s(c,t).filter(e=>!a.find(t=>{let a=t.actionArgs.selector===e.actionArgs.selector,c=t.actionArgs.className===e.actionArgs.className;return a&&c}));return e.concat(l)},[])}(a.target,c).forEach(e=>e.actionFunc(e.actionArgs))});let l=Array.from(document.querySelectorAll("[data-show-if], [data-hide-if]")).map(e=>{let t=e.getAttribute("data-show-if"),a=e.getAttribute("data-hide-if"),c="",s="";return t&&(c=`${t} [data-show-if="${t}"], ${t}[data-show-if="${t}"] {display: block;} [data-show-if="${t}"] {display: none}`),a&&(s=`${a} [data-hide-if="${a}"], ${a}[data-hide-if="${a}"] {display: none;}`),c+s}).join("");document.head.insertAdjacentHTML("beforeend","<style>"+l+"</style>")}()}));
//# sourceMappingURL=polystate.min.js.map
